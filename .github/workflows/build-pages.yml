name: Build static content to Pages

on:
  # Runs on pushes targeting the default branch
#   push:
    # branches: [$default-branch]
    # branches: 
    # - gh-pages

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# Sets permissions of the GITHUB_TOKEN to allow deployment to GitHub Pages
permissions:
    contents: read
    pages: write
    id-token: write
  
# Allow one concurrent deployment
concurrency:
    group: "pages"
    cancel-in-progress: true


jobs:
    build:
        runs-on: ubuntu-latest
        steps:
        - name: Checkout main
          uses: actions/checkout@v4
          with:
            fetch-depth: 0

        - name: Set up git
          run: |
            git config --global user.email "you@example.com"
            git config --global user.name "maxksorg builder"

        - name: "Push changes to pages"
          run: |
            git fetch origin
            git checkout pages
            git merge main
            ls -la
            rm -rf public/
            ls -la